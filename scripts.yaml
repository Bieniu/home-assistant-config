devices_away_mode:
  sequence:
  - service: homeassistant.turn_off
    data: {}
    target:
      entity_id:
      - light.ceiling_antek
      - light.ceiling_gabinet
      - light.ceiling_goscinny
      - light.ceiling_korytarz
      - light.ceiling_kuchnia
      - light.ceiling_lazienka
      - light.ceiling_przedpokoj
      - light.ceiling_salon
      - light.ceiling_toaleta
      - light.desk_lamp_antek
      - light.desk_lamp_gabinet
      - light.gateway_antresola
      - light.lamp_goscinny
      - light.lamp_gabinet
      - light.lamp_pracownia
      - light.lamp_salon
      - light.leds_przedpokoj
      - light.leds_salon
      - light.leds_schody
      - light.lightstrip_antek
      - light.lightstrip_sypialnia
      - light.table_lamp_sypialnia
      - light.scone_schody
      - light.tree_antek
      - fan.ceiling_salon
      - humidifier.xiaomi_salon
      - humidifier.xiaomi_antek
  mode: single
  alias: 'Devices: away mode'
  icon: mdi:home-export-outline
heating_day:
  sequence:
  - service: script.humidification_start
    data: {}
  - service: climate.turn_on
    data: {}
    target:
      entity_id:
      - climate.thermostat_lazienka
      - climate.thermostat_gabinet
      - climate.thermostat_antek
      - climate.thermostat_salon
      - climate.thermostat_sypialnia
      - climate.thermostat_kuchnia
      - climate.thermostat_pracownia
  - service: climate.set_temperature
    target:
      entity_id: climate.thermostat_lazienka
    data:
      temperature: '{{ states(''input_number.bathroom_temperature_day'') }}'
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.shelly_valve_72a544
    data:
      temperature: '{{ states(''input_number.temperature_day'') }}'
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.thermostat_kuchnia
      - climate.thermostat_salon
      - climate.thermostat_gabinet
      - climate.thermostat_pracownia
      - climate.shelly_valve_72a544
    data:
      temperature: '{{ states(''input_number.temperature_day'') }}'
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.thermostat_antek
      - climate.thermostat_sypialnia
    data:
      temperature: '{{ states(''input_number.bedroom_temperature_day'') }}'
  mode: single
  icon: mdi:radiator
  alias: 'Heating: day'
heating_night:
  sequence:
  - service: script.humidification_start
    data: {}
  - service: climate.turn_on
    data: {}
    target:
      entity_id:
      - climate.thermostat_kuchnia
      - climate.thermostat_pracownia
      - climate.thermostat_sypialnia
      - climate.thermostat_salon
      - climate.thermostat_antek
      - climate.thermostat_gabinet
      - climate.thermostat_lazienka
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.thermostat_gabinet
      - climate.thermostat_pracownia
      - climate.shelly_valve_72a544
    data:
      hvac_mode: heat
      temperature: '{{ states(''input_number.temperature_night'') }}'
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.thermostat_antek
      - climate.thermostat_sypialnia
    data:
      hvac_mode: heat
      temperature: '{{ states(''input_number.bedroom_temperature_night'') }}'
  - service: climate.set_temperature
    target:
      entity_id: climate.thermostat_lazienka
    data:
      hvac_mode: heat
      temperature: '{{ states(''input_number.bathroom_temperature_night'') }}'
  - condition: state
    entity_id: input_boolean.guests
    state: 'off'
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.thermostat_kuchnia
      - climate.thermostat_salon
    data:
      hvac_mode: heat
      temperature: '{{ states(''input_number.temperature_night'') }}'
  mode: single
  alias: 'Heating: night'
  icon: mdi:radiator
heating_away_mode:
  sequence:
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.shelly_valve_72a544
    data:
      temperature: '{{ states(''input_number.temperature_away'') }}'
  - service: climate.set_temperature
    target:
      entity_id:
      - climate.thermostat_gabinet
      - climate.thermostat_kuchnia
      - climate.thermostat_salon
      - climate.thermostat_antek
      - climate.thermostat_sypialnia
      - climate.thermostat_lazienka
      - climate.thermostat_pracownia
    data:
      hvac_mode: heat
      temperature: '{{ states(''input_number.temperature_away'') }}'
  - service: humidifier.turn_off
    target:
      entity_id:
      - humidifier.xiaomi_salon
      - humidifier.xiaomi_antek
    data: {}
  mode: single
  alias: 'Heating: away mode'
  icon: mdi:radiator
heating_season_end:
  sequence:
  - service: climate.turn_off
    target:
      entity_id:
      - climate.shelly_valve_72a544
      - climate.thermostat_antek
      - climate.thermostat_gabinet
      - climate.thermostat_kuchnia
      - climate.thermostat_lazienka
      - climate.thermostat_pracownia
      - climate.thermostat_salon
      - climate.thermostat_sypialnia
    data: {}
  - service: humidifier.turn_off
    data: {}
    target:
      entity_id:
      - humidifier.xiaomi_antek
      - humidifier.xiaomi_salon
  mode: single
  alias: 'Heating: end season'
  icon: mdi:radiator
heating_airing_begin:
  sequence:
  - service: climate.turn_off
    target:
      entity_id:
      - climate.shelly_valve_72a544
      - climate.thermostat_gabinet
      - climate.thermostat_salon
      - climate.thermostat_antek
      - climate.thermostat_sypialnia
      - climate.thermostat_lazienka
      - climate.thermostat_kuchnia
      - climate.thermostat_pracownia
  - service: humidifier.turn_off
    target:
      entity_id:
      - humidifier.xiaomi_salon
      - humidifier.xiaomi_antek
    data: {}
  - condition: state
    entity_id: input_boolean.heating_airing
    state: 'off'
  - service: input_boolean.turn_on
    entity_id: input_boolean.heating_airing
  mode: single
  alias: 'Heating: airing'
  icon: mdi:radiator
light_turn_on_antek_leds:
  sequence:
  - service: light.turn_on
    target:
      entity_id: light.lightstrip_antek
    data:
      brightness: 150
      rgb_color:
      - '{{ (range(0, 255)|random) }}'
      - '{{ (range(0, 255)|random) }}'
      - '{{ (range(0, 255)|random) }}'
  mode: single
  icon: mdi:lightbulb-outline
  alias: 'Light: turn on Antek''s LEDs'
camera_move:
  sequence:
  - service: mqtt.publish
    data:
      topic: camera/salon/motors/{{ orientation }}/set
      payload: '{{ direction }}'
  mode: single
  alias: 'Camera: move'
  icon: mdi:cctv
alexa_netflix:
  sequence:
  - service: remote.turn_on
    entity_id: remote.salon
    data:
      activity: Smart TV
  - delay: 00:00:02
  - service: remote.send_command
    data:
      num_repeats: 1
      delay_secs: 0.4
      hold_secs: 0
      command: Netflix
      device: Telewizor
    target:
      entity_id: remote.salon
  mode: single
  alias: 'Alexa: Netflix'
  icon: mdi:netflix
alexa_goodnight:
  sequence:
  - service: homeassistant.turn_off
    target:
      entity_id:
      - remote.salon
      - light.leds_salon
      - light.ceiling_salon
      - light.desk_lamp_antek
      - light.desk_lamp_gabinet
      - light.ceiling_gabinet
      - light.ceiling_goscinny
      - light.ceiling_kuchnia
      - light.ceiling_lazienka
      - light.ceiling_toaleta
      - light.ceiling_antek
      - light.ceiling_przedpokoj
      - light.ceiling_korytarz
      - light.scone_schody
  mode: single
  alias: 'Alexa: goodnight'
restart_wifi_devices:
  alias: Restart Wi-Fi Devices
  sequence:
  - service: switch.turn_off
    data: {}
    target:
      entity_id:
      - switch.shelly_plus_1pm_948ff8_relay
      - switch.ceiling_fan_and_bulbs_salon
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.shelly_plus_1pm_948ff8_relay
      - switch.ceiling_fan_and_bulbs_salon
  - service: button.press
    target:
      entity_id:
      - button.blitzwolf_bw_shp6_ed007d_restart
      - button.blitzwolf_bw_shp6_3766eb_restart
      - button.nettigo_air_monitor_restart
      - button.shelly_1l_253d92_restart
      - button.shelly_1l_61c9fd_restart
      - button.shelly_1l_701559_restart
      - button.shelly_1l_aacec4_restart
      - button.shelly_1l_aceb5f_restart
      - button.shelly_1l_ad365e_restart
      - button.shelly_1l_e361a5_restart
      - button.shelly_1pm_5fd486_restart
      - button.shelly_25_77dbe5_restart
      - button.shelly_duo_5f6fa1_restart
      - button.shelly_duo_rgbw_d4ecd3_restart
      - button.shelly_gas_c6811c_restart
      - button.shelly_motion_2_72a6a4_restart
      - button.shelly_motion_c67c2a_restart
      - button.shelly_plug_s_7aecf4_restart
      - button.shelly_plus_1pm_b22864_restart
      - button.shelly_plus_1pm_948ff8_restart
      - button.shelly_pro_1pm_80e0c0_restart
      - button.shelly_valve_72a544_restart
      - button.shelly_vintage_d10472_restart
      - button.wemos_lolin32_8cbf7c_restart
      - button.blitzwolf_bw_shp6_ecf9ea_restart
      - button.shelly_plus_plug_s_2ffb28_restart
    data: {}
  mode: single
  icon: mdi:restart
humidification_start:
  alias: 'Humidification: start'
  mode: single
  icon: mdi:air-humidifier
  sequence:
  - if:
    - condition: numeric_state
      entity_id: sensor.humidity_salon
      below: input_number.target_humidity
    - condition: numeric_state
      entity_id: sensor.xiaomi_mi_humidifier_ca1_water_level
      above: 5
    then:
    - service: humidifier.turn_on
      data: {}
      target:
        entity_id: humidifier.xiaomi_salon
  - if:
    - condition: numeric_state
      entity_id: sensor.humidity_antek
      below: input_number.target_humidity
    - condition: numeric_state
      entity_id: sensor.xiaomi_mi_humidifier_cb1_water_level
      above: 5
    then:
    - service: humidifier.turn_on
      data: {}
      target:
        entity_id: humidifier.xiaomi_antek
