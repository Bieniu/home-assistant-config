restart_hass:
  alias: Restart Home Assistant'a
  sequence:
    service: shell_command.restart_hass

reboot_pi:
  alias: Restart Raspberry Pi
  sequence:
    service: shell_command.reboot_pi

shutdown_pi:
  alias: Wyłącz Raspberry Pi
  sequence:
    service: shell_command.shutdown_pi

reboot_router:
  alias: Restart routera
  sequence:
    service: shell_command.reboot_router

fast_warm_up:
  alias: Szybkie dogrzanie
  sequence:
    - condition: state
      entity_id: input_boolean.heating_season
      state: 'on'
    - service: climate.set_temperature
      entity_id:
        - climate.antresola_thermostat_heating_1
        - climate.antek_thermostat_heating_1
        - climate.sypialnia_thermostat_heating_1
        - climate.kuchnia_thermostat_heating_1
      data:
        temperature: 24
    - delay: '00:25:00'
    - service: script.heating_day

#### DENON ####
denon_play_maciek_playlist:
  sequence:
    - service: media_player.turn_on
      entity_id: media_player.denon
    - service: media_player.select_source
      data:
        entity_id: media_player.denon
        source: Spotify
    - delay: 10
    - service: media_player.select_source
      data:
        entity_id: media_player.spotify
        source: Denon AVR-X2100W
    - service: media_player.play_media
      data:
        entity_id: media_player.spotify
        media_content_id: 'spotify:user:1166820816:playlist:56y1N3Ba9smMZAJBjUk1qn'
        media_content_type: 'playlist'

denon_play_internet_radio:
  sequence:
    - service: media_player.turn_on
      entity_id: media_player.denon
    - service: media_player.select_source
      data:
        entity_id: media_player.denon
        source: Internet Radio

#### XIAOMI GATEWAY ALARM ####
xiaomi_alarm:
  sequence:
    - service: xiaomi.play_ringtone
      data:
        ringtone_id: 2
        gw_sid: !secret xiaomi_gateway_sid
        ringtone_vol: 10

xiaomi_alarm_stop:
  sequence:
    service: xiaomi.stop_ringtone
    data:
      gw_sid: !secret xiaomi_gateway_sid

#### OTHER ####
night_mode:
  sequence:
    - service: switch.turn_off
      entity_id:
        - switch.light_salon_switch
        - switch.light_salon_switch_2
        - switch.light_lamp_salon
        - switch.wake_on_lan_stacjonarny
        - media_player.denon

#### HEATING ####
heating_day:
  sequence:
    - service: climate.set_temperature
      entity_id: 
        - climate.thermostat_antresola_heating_1
        - climate.thermostat_kuchnia_heating_1
      data_template:
        temperature: '{{ states.input_select.heating_temp_day.state }}'
    - service: climate.set_temperature
      entity_id: 
        - climate.thermostat_antek_heating_1
        - climate.thermostat_sypialnia_heating_1
      data_template:
        temperature: '{{ states.input_select.heating_temp_bedroom_day.state }}'
    - service: input_boolean.turn_off
      entity_id:
        - input_boolean.heating_night
        - input_boolean.heating_salon_kuchnia_night

heating_night:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.heating_night
    - service: climate.set_temperature
      entity_id: climate.thermostat_antresola_heating_1
      data_template:
        temperature: '{{ states.input_select.heating_temp_night.state }}'
    - service: climate.set_temperature
      entity_id: 
        - climate.thermostat_antek_heating_1
        - climate.thermostat_sypialnia_heating_1
      data_template:
        temperature: '{{ states.input_select.heating_temp_bedroom_night.state }}'
    - condition: template
      value_template: "{{ (states.group.guests.state == 'not_home') and (states.media_player.denon.state == 'off') }}"
    - service: climate.set_temperature
      entity_id: climate.thermostat_kuchnia_heating_1
      data_template:
        temperature: '{{ states.input_select.heating_temp_night.state }}'
    - service: input_boolean.turn_on
      entity_id: input_boolean.heating_salon_kuchnia_night

heating_eco_mode:
  sequence:
    - service: climate.set_temperature
      entity_id: 
        - climate.thermostat_antresola_heating_1
        - climate.thermostat_kuchnia_heating_1
        - climate.thermostat_antek_heating_1
        - climate.thermostat_sypialnia_heating_1
      data_template:
        temperature: '{{ states.input_select.heating_temp_eco.state }}'
    - condition: state
      entity_id: input_boolean.heating_airing
      state: 'on'
    - service: notify.ios_edyta_iphone
      data:
        title: 'Koniec przewietrzania'
        message: 'Domownicy opóścili mieszkanie. Wyłączono tryb przewietrzania.'
    - service: notify.html5_oneplus
      data_template: 
        title: 'Koniec przewietrzania'
        message: 'Domownicy opóścili mieszkanie. Wyłączono tryb przewietrzania.'
      data:
        data:
          tag: 'notification-airing-end'
    - service: input_boolean.turn_off
      entity_id: input_boolean.heating_airing

heating_season_end:
  sequence:
    service: climate.set_temperature
    entity_id:
      - climate.thermostat_antresola_heating_1
      - climate.thermostat_kuchnia_heating_1
      - climate.thermostat_antek_heating_1
      - climate.thermostat_sypialnia_heating_1
    data:
      temperature: 4

heating_airing_begin:
  sequence:
    service: climate.set_temperature
    entity_id: 
      - climate.thermostat_antresola_heating_1
      - climate.thermostat_kuchnia_heating_1
      - climate.thermostat_antek_heating_1
      - climate.thermostat_sypialnia_heating_1
    data:
      temperature: 8
