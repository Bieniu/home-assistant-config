background: "#e5e5e5"

anchors:
  card-header-no-padding-bottom: &card-header-no-padding-bottom
    card_mod:
      style: |
        h1.card-header {
          padding-bottom: 0px;
        }
  network-status-card: &network-status-card
    card_mod:
      style: |
        div#states.card-content {
          --paper-item-icon-active-color: var(--state-icon-color);
          --paper-item-icon-color: var(--disabled-text-color);
        }
  percent-entity: &percent-entity
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set percent = states(config.entity) %}
            {% if percent | int < 15 %}
              var(--label-badge-red)
            {% elif percent | int < 30 %}
              var(--label-badge-yellow)
            {% else %}
              var(--state-icon-color)
            {% endif %};
        }
title: "Dom"
views:
  - id: home
    icon: mdi:home
    title: "Pomieszczenia"
    path: home
    cards:
      - type: vertical-stack
        cards:
          - type: custom:auto-entities
            card:
              type: glance
              <<: *card-header-no-padding-bottom
              title: "Rodzina"
              show_name: false
            filter:
              include:
                - entity_id: person.maciek
                - entity_id: person.edyta
                - entity_id: person.antek
                - entity_id: person.grazyna
                  state: home
                - entity_id: person.romana
                  state: home
                - entity_id: person.jerzy
                  state: home
          - type: vertical-stack
            in_card: true
            title: "Pogoda"
            cards:
              - type: custom:simple-weather-card
                canary_style:
                  margin-top: "-24px"
                entity: weather.home
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/climate
                name: " "
                primary_info:
                  - humidity
                  - precipitation_probability
                secondary_info:
                  - pressure
                custom:
                  - temp: sensor.temperature_outdoor
                  - humidity: sensor.humidity_outdoor
                  - pressure: sensor.pressure_outdoor
                  - precipitation_probability: sensor.dark_sky_precip_probability
          - type: entities
            title: "Przedpokój"
            show_header_toggle: false
            state_color: true
            entities:
              - entity: binary_sensor.motion_przedpokoj
                secondary_info: last-changed
              - light.leds_przedpokoj
              - light.ceiling_przedpokoj
          # - type: vertical-stack
          #   in_card: true
          #   cards:
          #     - type: glance
          #       <<: *card-header-no-padding-bottom
          #       title: "Kuchnia"
          #       show_name: false
          #       entities:
          #         - sensor.temperature_salon
          #         - sensor.humidity_salon
          #         - sensor.illumination_kuchnia
          - type: entities
            title: "Kuchnia"
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.window_kuchnia
              - entity: binary_sensor.motion_kuchnia
                secondary_info: last-changed
              - binary_sensor.gas_leak_kuchnia
              - binary_sensor.water_leak_kuchnia
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.aeotec_thermostat_kuchnia
              - entity: sensor.dishwasher_kuchnia
                card_mod:
                  style: |
                    :host {
                      --paper-item-icon-color:
                        {% if is_state(config.entity, "zmywanie") %}
                          var(--state-icon-active-color)
                        {% else %}
                          var(--state-icon-color)
                        {% endif %};
                    }
              - light.ceiling_kuchnia
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Salon"
            show_name: false
            entities:
              - sensor.temperature_salon
              - sensor.humidity_salon
              - sensor.co2_salon
              - sensor.illumination_salon
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.window_salon
              - entity: binary_sensor.motion_salon
                secondary_info: last-changed
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.thermostat_salon
              - switch.ceiling_fan_salon
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: humidifier.xiaomi_salon
                  secondary_info:
                    entity: sensor.xiaomi_mi_humidifier_ca1_water_level
                    prefix: "poziom wody: "
                    postfix: " %"
              - entity: fan.air_purifier_salon
                secondary_info:
                  entity: sensor.aqi_attr_salon
                  prefix: "powietrze: "
              # - fan.pedestal_salon
              - light.ceiling_salon
              - light.leds_salon
              - light.lamp_salon
              - switch.christmas_tree_salon
              - input_select.light_scenes_salon
              - input_select.salon_harmony
              - type: custom:mini-media-player
                entity: media_player.bravia_salon
                hide:
                  controls: true
                  volume: true
                  power: true
                  progress: true
                info: scroll
                group: true
              - type: custom:mini-media-player
                entity: media_player.denon_salon
                hide:
                  controls: true
                  power: true
                  power_state: false
                  progress: true
                info: scroll
                group: true
              - type: conditional
                conditions:
                  - entity: media_player.dune_salon
                    state_not: "unavailable"
                row:
                  type: custom:mini-media-player
                  entity: media_player.dune
                  hide:
                    volume: true
                    controls: true
                    power: true
                    source: true
                  info: scroll
                  group: true
              - type: custom:mini-media-player
                entity: media_player.firetv_salon
                hide:
                  volume: true
                  controls: true
                  power: true
                  source: true
                info: scroll
                group: true
              - type: custom:mini-media-player
                entity: media_player.playstation_salon
                hide:
                  controls: true
                  volume: true
                  power: true
                  progress: true
                  source: true
                info: scroll
                group: true
              - type: custom:mini-media-player
                entity: media_player.echo_show_salon
                hide:
                  controls: true
                  volume: true
                  power: true
                  progress: true
                info: scroll
                group: true
                shortcuts:
                  label: "Skróty"
                  list:
                    - name: "RMF FM"
                      type: "service"
                      id: media_player.play_media
                      data:
                        entity_id: media_player.echo_show_salon
                        media_content_type: "TUNEIN"
                        media_content_id: "RMF FM in everywhere group"
                    - name: "MUZO FM"
                      type: "service"
                      id: media_player.play_media
                      data:
                        entity_id: media_player.echo_show_salon
                        media_content_type: "TUNEIN"
                        media_content_id: "MUZO FM in everywhere group"
                    - name: "Radio ZET"
                      type: "service"
                      id: media_player.play_media
                      data:
                        entity_id: media_player.echo_show_salon
                        media_content_type: "TUNEIN"
                        media_content_id: "Radio ZET in everywhere group"
                    - name: "Spotify [Antek]"
                      type: "service"
                      id: media_player.play_media
                      data:
                        entity_id: media_player.echo_show_salon
                        media_content_type: "SPOTIFY"
                        media_content_id: "in everywhere group playlist Antek"
                    - name: "Spotify [Edyta]"
                      type: "service"
                      id: media_player.play_media
                      data:
                        entity_id: media_player.echo_show_salon
                        media_content_type: "SPOTIFY"
                        media_content_id: "in everywhere group playlist Edyta"
                    - name: "Spotify [Maciek]"
                      type: "service"
                      id: media_player.play_media
                      data:
                        entity_id: media_player.echo_show_salon
                        media_content_type: "SPOTIFY"
                        media_content_id: "in everywhere group playlist Maciek"
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Toaleta"
            show_name: false
            entities:
              - sensor.temperature_toaleta
              - sensor.humidity_toaleta
              - sensor.illumination_toaleta
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: binary_sensor.motion_toaleta
                secondary_info: last-changed
              - light.ceiling_toaleta
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Pracownia"
            show_name: false
            entities:
              - sensor.temperature_pracownia
              - sensor.humidity_pracownia
              - sensor.illumination_pracownia
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.balcony_door_pracownia
              - entity: binary_sensor.motion_pracownia
                secondary_info: last-changed
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.thermostat_pracownia
              - switch.lamp_pracownia
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Pokój gościnny"
            show_name: false
            entities:
              - sensor.temperature_goscinny
              - sensor.humidity_goscinny
              - sensor.illumination_goscinny
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: binary_sensor.motion_goscinny
                secondary_info: last-changed
              - light.gateway_goscinny
              - type: conditional
                conditions:
                  - entity: media_player.mibox_goscinny
                    state_not: "unavailable"
                row:
                  type: custom:mini-media-player
                  entity: media_player.mibox_goscinny
                  name: "Mi Box"
                  hide:
                    controls: true
                    power: true
                    source: true
                  info: scroll
                  group: true
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Antresola"
            show_name: false
            entities:
              - sensor.temperature_antresola
              - sensor.humidity_antresola
              - sensor.illumination_antresola
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.windows_antresola
              - entity: binary_sensor.motion_antresola
                secondary_info: last-changed
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.thermostat_antresola
              - light.leds_schody
              - light.gateway_antresola
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Gabinet"
            show_name: false
            entities:
              - sensor.temperature_gabinet
              - sensor.humidity_gabinet
              - sensor.illumination_gabinet
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.window_gabinet
              - entity: binary_sensor.motion_gabinet
                secondary_info: last-changed
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.thermostat_gabinet
              - fan.pedestal_gabinet
              - light.ceiling_gabinet
              - light.lamp_gabinet
              - light.desk_lamp_gabinet
              - switch.stacjonarny
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Pokój Antka"
            show_name: false
            entities:
              - sensor.temperature_antek
              - sensor.humidity_antek
              - sensor.illumination_antek
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.window_antek
              - entity: binary_sensor.motion_antek
                secondary_info: last-changed
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.thermostat_antek
              - light.ceiling_antek
              - light.desk_lamp_antek
              - light.lightstrip_antek
              - switch.tree_antek
              - type: custom:mini-media-player
                entity: media_player.echo_plus_antek
                hide:
                  controls: true
                  volume: true
                  power: true
                  progress: true
                  source: true
                info: scroll
                group: true
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Sypialnia"
            show_name: false
            entities:
              - sensor.temperature_sypialnia
              - sensor.humidity_sypialnia
              - sensor.illumination_sypialnia
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.window_sypialnia
              - binary_sensor.balcony_door_sypialnia
              - entity: binary_sensor.motion_sypialnia
                secondary_info: last-changed
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.thermostat_sypialnia
              - light.double_ceiling_sypialnia
              - light.lightstrip_sypialnia
              - type: custom:mini-media-player
                entity: media_player.echo_dot_sypialnia
                hide:
                  controls: true
                  volume: true
                  power: true
                  progress: true
                  source: true
                info: scroll
                group: true
      - type: vertical-stack
        in_card: true
        cards:
          - type: glance
            <<: *card-header-no-padding-bottom
            title: "Łazienka"
            show_name: false
            entities:
              - sensor.temperature_lazienka
              - sensor.humidity_lazienka
              - sensor.illumination_lazienka
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: binary_sensor.motion_lazienka
                secondary_info: last-changed
              - type: conditional
                conditions:
                  - entity: input_boolean.heating_season
                    state_not: "off"
                row:
                  entity: climate.custom_thermostat_lazienka
              - light.ceiling_lazienka
      - type: picture-glance
        title: "Salon"
        entities:
          - switch.camera_move_left
          - switch.camera_move_right
          - switch.camera_move_up
          - switch.camera_move_down
        camera_image: camera.salon
  - id: map
    icon: mdi:map
    title: "Mapa"
    path: map
    panel: true
    cards:
      - type: map
        card_mod:
          style: |
            ha-card {
              border-radius: 0px;
            }
        default_zoom: 20
        hours_to_show: 12
        entities:
          - person.edyta
          - person.maciek
          - person.antek
          - person.karmel
          - zone.home
          - zone.grandparents
          - zone.grandmother
          - zone.school_antek
          - zone.work_edyta_katowice
          - zone.work_edyta_lodz
          - zone.work_edyta_warszawa
          - zone.work_edyta_wroclaw
          - zone.work_maciek_warszawa
          - zone.skaratki_horses
  - id: network
    icon: mdi:ethernet
    title: "Sieć"
    path: network
    cards:
      - type: vertical-stack
        cards:
          - type: vertical-stack
            in_card: true
            title: "Internet"
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        ha-card.flex {
                          padding-top: 0px;
                          padding-bottom: 0px;
                        }
                    <<: &GRAPH_IN_CARD
                      hour24: true
                      points_per_hour: 1
                      animate: true
                      font_size: 90
                      show:
                        fill: false
                        labels: false
                        points: false
                    line_color: "#36a2eb"
                    decimals: 1
                    entities:
                      - sensor.speedtest_download
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        ha-card.flex {
                          padding-top: 0px;
                          padding-bottom: 0px;
                        }
                    <<: *GRAPH_IN_CARD
                    line_color: "#ffce57"
                    decimals: 1
                    entities:
                      - sensor.speedtest_upload
          - type: vertical-stack
            in_card: true
            title: "Router"
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        ha-card.flex {
                          padding-top: 0px;
                          padding-bottom: 0px;
                        }
                    <<: *GRAPH_IN_CARD
                    line_color: "#36a2eb"
                    decimals: 1
                    entities:
                      - sensor.asuswrt_download_speed
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        ha-card.flex {
                          padding-top: 0px;
                          padding-bottom: 0px;
                        }
                    <<: *GRAPH_IN_CARD
                    line_color: "#ffce57"
                    decimals: 1
                    entities:
                      - sensor.asuswrt_upload_speed
          - type: vertical-stack
            in_card: true
            cards:
              - type: entities
                title: "Intel NUC"
                show_header_toggle: false
                entities:
                  - sensor.disk_use_percent
                  - sensor.nuc_cpu_temp
                  - entity: sensor.last_restart
                    format: relative
                  - entity: sensor.ssl_certificate_expiry_timestamp
                    format: relative
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    <<: *GRAPH_IN_CARD
                    decimals: 0
                    entities:
                      - sensor.processor_use
                    <<: &GRAPH_COLOR_THRESHOLD
                      color_thresholds:
                        - value: 17
                          color: "#43a047"
                        - value: 34
                          color: "#fbc02d"
                        - value: 51
                          color: "#fb8c00"
                        - value: 68
                          color: "#f4511e"
                        - value: 85
                          color: "#d81b60"
                  - type: custom:mini-graph-card
                    <<: *GRAPH_IN_CARD
                    decimals: 1
                    entities:
                      - sensor.memory_use_percent
                    <<: *GRAPH_COLOR_THRESHOLD
          - type: vertical-stack
            in_card: true
            cards:
              - type: entities
                title: "Raspberry Pi 4B"
                show_header_toggle: false
                entities:
                  - sensor.raspberry_disk_use
                  - sensor.raspberry_cpu_temp
                  - entity: sensor.raspberry_last_restart
                    format: relative
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    <<: *GRAPH_IN_CARD
                    decimals: 0
                    entities:
                      - sensor.raspberry_processor_use
                    <<: *GRAPH_COLOR_THRESHOLD
                  - type: custom:mini-graph-card
                    <<: *GRAPH_IN_CARD
                    decimals: 1
                    entities:
                      - sensor.raspberry_memory_use
                    <<: *GRAPH_COLOR_THRESHOLD
          - type: vertical-stack
            cards:
              - type: entities
                title: "Drukarka"
                show_header_toggle: false
                entities:
                  - sensor.printer_status
                  - sensor.printer_page_counter
                  - entity: sensor.printer_drum_remaining_life
                    <<: *percent-entity
                  - entity: sensor.printer_toner_remaining
                    <<: *percent-entity
                  - sensor.printer_last_restart
              - type: entities
                title: "Synology"
                show_header_toggle: false
                entities:
                  - sensor.synology_disk_used
                  - entity: sensor.synology_last_restart
                    format: relative
      - type: vertical-stack
        cards:
          - type: entities
            title: "Home Assistant"
            show_header_toggle: false
            entities:
              - sensor.ha_version_current
              - sensor.ha_version_installed
              - entity: sensor.home_assistant_last_restart
                format: relative
              - sensor.ha_database_size
          - type: entities
            title: "Serwer Minecraft"
            entities:
              - binary_sensor.minecraft_server_status
              - sensor.minecraft_server_players_online
              - sensor.minecraft_server_version
      - type: entities
        title: "Urządzenia sieciowe"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.modem_status
          - binary_sensor.router_status
          - binary_sensor.lyra_54cf59_status
      - type: entities
        title: "Serwery"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.synology_status
          - binary_sensor.nuc_status
          - binary_sensor.raspberry_status
          - binary_sensor.brother_status
      - type: entities
        title: "Komputery"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.stacjonarny_status
          - binary_sensor.laptop_status
          - binary_sensor.laptop_edyta_status
          - binary_sensor.laptop_maciek_status
          - binary_sensor.laptop_antek_status
      - type: entities
        title: "Urządzenia mobilne"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.oneplus_status
          - binary_sensor.iphone_11_status
          - binary_sensor.iphone_8_plus_status
          - binary_sensor.ipad_status
          - binary_sensor.kindle_keyboard_3g_status
          - binary_sensor.kindle_8_status
          - binary_sensor.inkbook_status
      - type: entities
        title: "Urządzenia RTV"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.bravia_status
          - binary_sensor.denon_status
          - binary_sensor.dune_status
          - binary_sensor.mibox_status
          - binary_sensor.firetv_status
          - binary_sensor.playstation_status
          - binary_sensor.xbox_status
          - binary_sensor.echo_show_status
          - binary_sensor.echo_plus_status
          - binary_sensor.echo_dot_status
          - binary_sensor.harmony_status
      - type: entities
        title: "IoT - inne"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.migateway_cc6f0b_status
          - binary_sensor.migateway_a0f210_status
          - binary_sensor.dafang_status
          - binary_sensor.mihumidifier_status
          - binary_sensor.mifan_status
          - binary_sensor.miairpurifier_status
          - binary_sensor.thermomix_status
          - binary_sensor.shelly_valve_2a544_status
      - type: entities
        title: "IoT - oświetlenie"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.yeelight_yldp06yl_84be7a_status
          - binary_sensor.yeelight_yldp06yl_7cafc6_status
          - binary_sensor.yeelight_yldp02yl_f12026_status
          - binary_sensor.yeelight_yldp02yl_b1b6aa_status
          - binary_sensor.yeelight_yldd01yl_860cfa_status
          - binary_sensor.yeelight_yldd01yl_6707fc_status
          - binary_sensor.yeelight_mjtd01syl_94e1f5_status
          - binary_sensor.yeelight_mjtd01syl_4fbaa2_status
          - binary_sensor.shelly_duo_5f6fa1_status
          - binary_sensor.shelly_duo_rgbw_d4ecd3_status
          - binary_sensor.shelly_vintage_d10472_status
      - type: entities
        title: "IoT - sensory"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.shelly_ht_e00abd_status
          - binary_sensor.shelly_motion_c67c2a_status
          - binary_sensor.shelly_flood_f2ad1d_status
          - binary_sensor.shelly_gas_c6811c_status
          - binary_sensor.wemos_d1_mini_1c91ea_status
          - binary_sensor.nettigo_air_monitor_status
      - type: entities
        title: "IoT - przekaźniki"
        show_header_toggle: false
        state_color: true
        <<: *network-status-card
        entities:
          - binary_sensor.sonoff_basic_a786cc_status
          - binary_sensor.sonoff_basic_067c81_status
          - binary_sensor.sonoff_basic_5dfba8_status
          - binary_sensor.sonoff_s26_182475_status
          - binary_sensor.blitzwolf_bw_shp6_2ad05a_status
          - binary_sensor.blitzwolf_bw_shp6_ed007d_status
          - binary_sensor.blitzwolf_bw_shp6_ecf9ea_status
          - binary_sensor.blitzwolf_bw_shp6_3766eb_status
          - binary_sensor.blitzwolf_bw_shp6_17957c_status
          - binary_sensor.blitzwolf_bw_shp6_173eb6_status
          - binary_sensor.shelly_1_328900_status
          - binary_sensor.shelly_1_d42455_status
          - binary_sensor.shelly_1l_701559_status
          - binary_sensor.shelly_1l_aceb5f_status
          - binary_sensor.shelly_1l_ad1b60_status
          - binary_sensor.shelly_1l_61c9fd_status
          - binary_sensor.shelly_1l_ad365e_status
          - binary_sensor.shelly_1l_acedf2_status
          - binary_sensor.shelly_1l_aacec4_status
          - binary_sensor.shelly_1l_4a262c9_status
          - binary_sensor.shelly_2_5b2604_status
          - binary_sensor.shelly_pro_4pm_d8b95c_status
          - binary_sensor.shelly_plug_s_7aecf4_status
          - binary_sensor.shelly_plus_i4_09e6ac_status
  - id: energy
    icon: mdi:power-plug
    title: "Energia"
    path: energy
    cards:
      - type: energy-devices-graph
        title: "Zużycie energii"
      - type: vertical-stack
        in_card: true
        cards:
          - type: entities
            title: "UPS"
            show_header_toggle: false
            entities:
              - sensor.ups_status
              - entity: sensor.cyberpower_dl650elcd_battery_charge
                card_mod:
                  style: |
                    :host {
                      --paper-item-icon-color:
                        {% set battery = states(config.entity) %}
                        {% if battery | int < 20 %}
                          var(--label-badge-red)
                        {% elif battery | int < 40 %}
                          var(--label-badge-yellow)
                        {% else %}
                          var(--state-icon-color)
                        {% endif %};
                    }
              - sensor.cyberpower_dl650elcd_load
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                <<: *GRAPH_IN_CARD
                icon: mdi:sine-wave
                decimals: 0
                entities:
                  - sensor.cyberpower_dl650elcd_input_voltage
                line_color: "#ef5350"
              - type: custom:mini-graph-card
                <<: *GRAPH_IN_CARD
                icon: mdi:sine-wave
                decimals: 0
                entities:
                  - sensor.cyberpower_dl650elcd_battery_voltage
                line_color: "#36a2eb"
                lower_bound: 0
      - type: custom:battery-state-card
        name: "Baterie sensorów ruchu"
        tap_action:
          action: more-info
        color_thresholds:
          - value: 20
            color: var(--label-badge-red)
          - value: 40
            color: var(--label-badge-yellow)
          - value: 100
            color: var(--state-icon-color)
        entities:
          - sensor.battery_xiaomi_motion_aq2_przedpokoj
          - sensor.shelly_motion_c67c2a_battery
          - sensor.battery_xiaomi_motion_salon
          - sensor.battery_xiaomi_motion_aq2_salon
          - sensor.battery_xiaomi_motion_aq2_toaleta
          - sensor.battery_xiaomi_motion_aq2_pracownia
          - sensor.battery_xiaomi_motion_aq2_goscinny
          - sensor.battery_xiaomi_motion_aq2_schody
          - sensor.battery_xiaomi_motion_aq2_antresola
          - sensor.battery_xiaomi_motion_aq2_gabinet
          - sensor.battery_xiaomi_motion_aq2_antek
          - sensor.battery_xiaomi_motion_aq2_sypialnia
          - sensor.battery_xiaomi_motion_aq2_lazienka
      - type: custom:battery-state-card
        name: "Baterie sensorów temperatury"
        tap_action:
          action: more-info
        color_thresholds:
          - value: 20
            color: var(--label-badge-red)
          - value: 40
            color: var(--label-badge-yellow)
          - value: 100
            color: var(--state-icon-color)
        entities:
          - sensor.battery_xiaomi_ht_salon
          - sensor.battery_xiaomi_weather_v1_toaleta
          - sensor.battery_xiaomi_ht_pracownia
          - sensor.battery_xiaomi_ht_goscinny
          - sensor.battery_xiaomi_ht_antresola
          - sensor.battery_xiaomi_ht_gabinet
          - sensor.battery_xiaomi_ht_antek
          - sensor.battery_xiaomi_ht_sypialnia
          - sensor.battery_xiaomi_ht_lazienka
      - type: custom:battery-state-card
        name: "Baterie sensorów wody"
        tap_action:
          action: more-info
        color_thresholds:
          - value: 20
            color: var(--label-badge-red)
          - value: 40
            color: var(--label-badge-yellow)
          - value: 100
            color: var(--state-icon-color)
        entities:
          - sensor.shelly_flood_f2ad1d_battery
      - type: custom:battery-state-card
        name: "Baterie termostatów"
        tap_action:
          action: more-info
        color_thresholds:
          - value: 20
            color: var(--label-badge-red)
          - value: 40
            color: var(--label-badge-yellow)
          - value: 100
            color: var(--state-icon-color)
        entities:
          - sensor.battery_thermostat_salon
          - sensor.battery_thermostat_kuchnia
          - sensor.battery_thermostat_antresola
          - sensor.battery_thermostat_gabinet
          - sensor.battery_thermostat_antek
          - sensor.battery_thermostat_sypialnia
          - sensor.battery_thermostat_lazienka
          - sensor.battery_thermostat_pracownia
      - type: custom:battery-state-card
        name: "Baterie sensorów okien/drzwi"
        tap_action:
          action: more-info
        color_thresholds:
          - value: 20
            color: var(--label-badge-red)
          - value: 40
            color: var(--label-badge-yellow)
          - value: 100
            color: var(--state-icon-color)
        entities:
          - sensor.battery_xiaomi_magnet_kuchnia
          - sensor.battery_xiaomi_magnet_salon
          - sensor.battery_xiaomi_magnet_pracownia
          - sensor.battery_xiaomi_magnet_antresola_1
          - sensor.battery_xiaomi_magnet_antresola_2
          - sensor.battery_xiaomi_magnet_gabinet
          - sensor.battery_xiaomi_magnet_antek
          - sensor.battery_xiaomi_magnet_window_sypialnia
          - sensor.battery_xiaomi_magnet_door_sypialnia
      - type: custom:battery-state-card
        name: "Baterie przełączników"
        tap_action:
          action: more-info
        color_thresholds:
          - value: 20
            color: var(--label-badge-red)
          - value: 40
            color: var(--label-badge-yellow)
          - value: 100
            color: var(--state-icon-color)
        entities:
          - sensor.battery_xiaomi_switch_salon_1
          - sensor.battery_xiaomi_switch_salon_2
          - sensor.battery_xiaomi_switch_antek
  - id: climate
    icon: mdi:cloud
    title: "Klimat"
    path: climate
    cards:
      - type: vertical-stack
        cards:
          - type: custom:bom-weather-card
            entity_sun: sun.sun
            entity_daily_summary: sensor.dark_sky_daily_summary
            entity_current_conditions: sensor.dark_sky_icon
            entity_humidity: sensor.humidity_outdoor
            entity_pressure: sensor.pressure_outdoor
            entity_temperature: sensor.temperature_outdoor
            entity_apparent_temp: sensor.realfeel_temperature_home
            entity_wind_bearing: sensor.dark_sky_wind_bearing
            entity_wind_speed: sensor.dark_sky_wind_speed
            entity_pop: sensor.dark_sky_precip_probability
            entity_pop_intensity: sensor.precipitation_home
            entity_forecast_high_temp_1: sensor.dark_sky_daytime_high_temperature_1d
            entity_forecast_high_temp_2: sensor.dark_sky_daytime_high_temperature_2d
            entity_forecast_high_temp_3: sensor.dark_sky_daytime_high_temperature_3d
            entity_forecast_high_temp_4: sensor.dark_sky_daytime_high_temperature_4d
            entity_forecast_high_temp_5: sensor.dark_sky_daytime_high_temperature_5d
            entity_forecast_low_temp_1: sensor.dark_sky_overnight_low_temperature_1d
            entity_forecast_low_temp_2: sensor.dark_sky_overnight_low_temperature_2d
            entity_forecast_low_temp_3: sensor.dark_sky_overnight_low_temperature_3d
            entity_forecast_low_temp_4: sensor.dark_sky_overnight_low_temperature_4d
            entity_forecast_low_temp_5: sensor.dark_sky_overnight_low_temperature_5d
            entity_forecast_icon_1: sensor.dark_sky_icon_1d
            entity_forecast_icon_2: sensor.dark_sky_icon_2d
            entity_forecast_icon_3: sensor.dark_sky_icon_3d
            entity_forecast_icon_4: sensor.dark_sky_icon_4d
            entity_forecast_icon_5: sensor.dark_sky_icon_5d
            entity_summary_1: sensor.dark_sky_summary_1d
            entity_summary_2: sensor.dark_sky_summary_2d
            entity_summary_3: sensor.dark_sky_summary_3d
            entity_summary_4: sensor.dark_sky_summary_4d
            entity_summary_5: sensor.dark_sky_summary_5d
            entity_pop_1: sensor.dark_sky_precip_probability_1d
            entity_pop_2: sensor.dark_sky_precip_probability_2d
            entity_pop_3: sensor.dark_sky_precip_probability_3d
            entity_pop_4: sensor.dark_sky_precip_probability_4d
            entity_pop_5: sensor.dark_sky_precip_probability_5d
            current_data_top_margin: 7em
            time_format: 24
            locale: pl
            tooltips: true
            tooltip_width: 100
            tooltip_bg_color: "#FAFAFA"
            tooltip_fg_color: "#212121"
            tooltip_border_color: "#D9D9D9"
            tooltip_left_offset: -14
            slot_l1: "wind"
            slot_l2: "pop"
            slot_l3: "remove"
            slot_l4: "remove"
            slot_l5: "remove"
            slot_r1: "humidity"
            slot_r2: "pressure"
            slot_r3: "remove"
            slot_r4: "remove"
            slot_r5: "remove"
            old_icon: "true"
            show_decimals: true
          - type: custom:sun-card
          - type: iframe
            url: https://embed.windy.com/embed2.html?lat=52.101&lon=19.948&zoom=11&location=coordinates&metricWind=m%2Fs
            aspect_ratio: 61%
          - type: entity
            entity: sensor.air_quality_info_outdoor
            card_mod:
              style: |
                ha-card {
                  --ha-card-background:
                    {% set air_quality = states("sensor.air_quality_info_outdoor") %}
                    {% if air_quality == "bardzo dobra" %}
                      #43a047;
                    {% elif air_quality == "dobra" %}
                      #fbc02d;
                    {% elif air_quality == "średnia" %}
                      #fb8c00;
                    {% elif air_quality == "zła" %}
                      #f4511e;
                    {% elif air_quality == "bardzo zła" %}
                      #d81b60;
                    {% else %}
                      #000000;
                    {% endif %}
                  color: #fff;
                }
                ha-icon {
                  color: #ffffff;
                }
          - type: entity
            entity: sensor.aqi_info_salon
            card_mod:
              style: |
                ha-card {
                  --ha-card-background:
                    {% set airly = states("sensor.aqi_info_salon") %}
                    {% if airly == "bardzo dobra" %}
                      #43a047;
                    {% elif airly == "dobra" %}
                      #fbc02d;
                    {% elif airly == "średnia" %}
                      #fb8c00;
                    {% elif airly == "zła" %}
                      #f4511e;
                    {% elif airly == "bardzo zła" %}
                      #d81b60;
                    {% else %}
                      #000000;
                    {% endif %}
                  color: #fff;
                }
                ha-icon {
                  color: #ffffff;
                }
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            <<: &CLIMATE_GRAPH_PARAMS
              hour24: true
              points_per_hour: 1
              height: 85
              show:
                fill: fade
                legend: false
            entities:
              - sensor.temperature_outdoor
            line_color: "#ef5350"
            decimals: 1
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - sensor.humidity_outdoor
            line_color: "#36a2eb"
            decimals: 1
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - sensor.pressure_outdoor
            line_color: "#4bc0c0"
            decimals: 0
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - sensor.temperature_indoor
            line_color: "#ef5350"
            decimals: 1
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - sensor.humidity_indoor
            line_color: "#36a2eb"
            decimals: 1
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            name: "Dwutlenek węgla"
            entities:
              - entity: sensor.co2_salon
            line_color: "#8bc34a"
            decimals: 0
            icon: "mdi:molecule-co2"
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - entity: sensor.pm25_salon
            line_color: "#78909c"
            decimals: 0
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - sensor.pm1_outdoor
            line_color: "#78909c"
            decimals: 0
            icon: "mdi:molecule"
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - entity: sensor.pm25_outdoor
            line_color: "#78909c"
            decimals: 0
            icon: "mdi:molecule"
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - entity: sensor.pm10_outdoor
            line_color: "#78909c"
            decimals: 0
            icon: "mdi:molecule"
          - type: custom:mini-graph-card
            <<: *CLIMATE_GRAPH_PARAMS
            entities:
              - sensor.uv_index_home
            line_color: "#ffce57"
            decimals: 0
      - type: custom:auto-entities
        card:
          type: entities
          title: "Stężenia alergenów"
        filter:
          include:
            - entity_id: "sensor.stezenie_*"
          exclude:
            - state: "lack"
  - id: misc
    icon: mdi:cog
    title: "Różne"
    path: misc
    visible:
      - user: cd5c77d085144390919eb90ad3832d0d
      - user: bccfc5a472de4058a59e1cc468da1ca5
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            title: "Ustawienia ogrzewania"
            show_header_toggle: false
            entities:
              - input_boolean.heating_season
              - script.heating_fast_warm_up
              - input_boolean.heating_airing
              - input_boolean.away_mode
              - input_boolean.guests
          - type: entities
            title: "Harmonogram ogrzewania"
            show_header_toggle: false
            entities:
              - input_datetime.heating_night_start
              - input_datetime.heating_night_end
              - input_datetime.heating_night_start_weekend
              - input_datetime.heating_night_end_weekend
      - type: entities
        title: "Temperatury ogrzewania"
        show_header_toggle: false
        entities:
          - input_select.heating_temp_bedroom_day
          - input_select.heating_temp_bedroom_night
          - input_select.heating_temp_bathroom_day
          - input_select.heating_temp_bathroom_night
          - input_select.heating_temp_day
          - input_select.heating_temp_night
          - input_select.heating_temp_away
      - type: vertical-stack
        cards:
          - type: entities
            title: "Ustawienie nawilżania"
            show_header_toggle: false
            entities:
              - input_select.target_humidity
          - type: entities
            title: "Ustawienia oświetlenia"
            show_header_toggle: false
            entities:
              - input_boolean.light_auto_turn_salon
              - input_boolean.light_auto_turn_pracownia
              - input_boolean.light_auto_turn_goscinny
              - input_boolean.light_auto_turn_gabinet
          - type: entities
            title: "Skrypty i ustawienia"
            show_header_toggle: false
            entities:
              - input_select.log_level